<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Laravel projektin p√§ivitys GitHub actionsin avulla</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;700&display=swap" rel="stylesheet">
    
    
    
    
    <link rel="stylesheet" href="/laravel-github-cpanel/assets/index.353831d1.css">
  </head>
  <body>



    <header class="primary-header">
      <div class="container">

        <div class="nav-wrapper">

          <a href="#">
            <svg class="logo">
              <use xlink:href="./images/sitelogo-sprite.svg#sitelogo"></use>
            </svg>
          </a>
          
          <!--
          <button class="mobile-nav-toggle" aria-expanded="false" aria-controls="primary-navigation">
            <span class="visually-hidden">Menu</span>
          </button>

          <nav class="primary-navigation">
            <ul aria-label="Primary" role="list" class="nav-list"  id="primary-navigation">
              <li><a href="#">Github cPanel</a></li>
              <li><a href="./laravel-github-cpanel.html">Laravel Github cPanel</a></li>
            </ul>
          </nav>

          <button class="button display-sm-none display-md-inline-flex">Get Started</button>

        -->

        </div>

      </div>
    </header>



    <main>

      <section class="padding-block-200 border-bottom">
        <div class="container tutorial-text">

          <!-- The Modal -->
          <div id="laravel-github-cpanel-page-modal" class="modal">

              <!-- The Close Button -->
              <span class="close">&times;</span>
          
              <!-- Modal Content (The Image) -->
              <img class="modal-content" id="laravel-github-cpanel-page-modal-img">
          
              <!-- Modal Caption (Image Text) -->
              <div id="caption"></div>
          </div>

          <p id="top_of_the_page">
              T√§ss√§ oppaassa kerrotaan kuinka saadaan m√§√§ritetty√§ ketju, jonka avulla <a href="https://github.com/features/actions" target="_blank">Github-actionsia</a> k√§ytt√§en voidaan kotikoneelta yll√§pit√§√§ Webhotellissa toimivaa Laravel-sivustoa.
          </p>
          <p>
              Oppaassa hahmotellaan yleisperiaate, ei niink√§√§n t√§ydellinen malliratkaisu. 
          </p>
          <p>Opas jakaantuu seuraaviin vaiheisiin:</p>
          <ul>
            <li><a href="#lahto-oletukset">k√§yd√§√§n l√§pi l√§ht√∂oletukset</a></li>
            <li><a href="#alustus-cPanel">tehd√§√§n alustavat toimenpiteen Web-palvelimella</a></li>
            <li><a href="#alustus-github">avataan uusi GitHub repository</a></li>
            <li><a href="#uusi-laravel-projekti">luodaan kotikoneelle uusi Laravel-projekti</a></li>
            <li><a href="#github-varmistus">varmistetaan, ett√§ tiedostot saadaan siirretty√§ GitHub:iin</a></li>
            <li><a href="#laravel-asennus-palvelimella">Laravelin asennus palvelimella</a></li>
            <li><a href="#tietokanta-palvelimella">tietokannan asennus palvelimella</a></li>
            <li><a href="#tietokanta-asetukset-omalla-koneella">tietokannan asennus omalle koneelle</a></li>
            <li><a href="#tietokanta-asetusten-viimeistely-palvelimella">tietokanta-asetusten viimeistely palvelimella</a></li>
            <li><a href="#loppusanat">loppusanat</a></li>
          </ul>
          <p>
              Jokainen toimintaymp√§rist√∂ on erilainen, joten todenn√§k√∂isesti jossain vaiheessa t√∂rm√§√§t ongelmaan, jota oppaan esimerkiss√§ ei k√§sitelty. 
          </p>
          <p>
              Esimerkiksi itse jouduin loppuvaiheessa, kun palvelimella otetaan k√§ytt√∂√∂n tietokanta, tekem√§√§n muutoksen konfigurointietoihin, mutta en k√§y t√§t√§ muutosta l√§pi oppaassa, sill√§ samaa ongelma tuskin koskee kaikkia. 
          </p>
          <p>
              Virheilmoituksen ja <a href="https://stackoverflow.com/" target="_blank">Stack Overflow:n</a> avulla ongelma ratkesi sangen nopeasti.
          </p>

            
        </div>
      </section>


      <section class="padding-block-200 border-bottom">
        <div class="container tutorial-text">


            <h3 class="fs-600 fw-bold" id="lahto-oletukset">L√§ht√∂oletukset</h3>

            <p>Oppaan suorittaminen edellytt√§√§, ett√§:</p>
            <ul>
                <li>k√§yt√∂ss√§si on <a href="https://cpanel.net/" target="_blank">cPanelia</a> tukeva Webhotelli</li>
                <li>sinulla on <a href="https://github.com/" target="_blank">GitHub-tili</a></li>
            </ul>
            <p>Ja, ett√§ koneellesin on asennettu:</p>
            <ul>
                <li><a href="https://git-scm.com/" target="_blank">Git-versionhallintaohjelmisto</a></li>
                <li>PHP:t√§ ja mySql:√§√§ tukeva webpalvelin, esim. <a href="https://www.apachefriends.org/" target="_blank">Xampp</a></li>
                <li>PHP:n versionhallintaohjelmisto <a href="https://getcomposer.org/" target="_blank">Composer</a></li>
            </ul>
            <p>Opimaalista olisi, jos kotikoneella ja webpalvelimella on k√§yt√∂ss√§ sama PHP-versio, t√§ll√∂in molemmille koneille asentuu automaattisesti sama Laravel-versio.</p>
            
            <p>
              Ty√∂n edetess√§ kannattaa kirjata yl√∂s tietoja, joita tulemme my√∂hemmiss√§ vaiheissa tarvitsemaan.
              <button onclick='displayNotes("V1")' class="notes_link">Muistiinpanot</button>-linkin avulla saat n√§kyville, mit√§ tietoja kussakin vaiheessa pit√§√§ olla selvill√§.
              Aukeavassa ikkunassa n√§ytet√§√§n mallina arvot, joita min√§ k√§ytin t√§t√§ opasta tehdess√§ni. 
              Sinulla arvot tietekin ovat oman teht√§v√§si mukaiset.
            </p>

            <p>Mik√§li edellytykset ovat kunnossa, l√§hdet√§√§n liikkeelle suorittamalla cPanel:ssa tarvittavat ennakkovalmistelut.</p>
            
            <a href="#top_of_the_page">Takaisin sivun alkuun</a>
        </div>
      </section>

      <section class="padding-block-200 border-bottom">
        <div class="container tutorial-text">

          <h3 id="alustus-cPanel" class="fs-600 fw-bold">cPanel</h3>

          <p>Luodaan t√§t√§ projektia varten kaksi subdomainia.</p>
          <p>Toiseen sijoitetaan Laravel-projektin tiedostot. Emme kuitenkaan paljasta t√§t√§ domainia kaiken kansan n√§ht√§ville, sill√§ samalla avautuisi yleiseen tietoon my√∂s salaiseksi tarkoitettu <em>.env -tiedosto</em>. </p>
          <p>Joten luodaan varsinaiselle julkaisulle oma subdomain, johon luomme my√∂hemm√§ss√§ vaiheessa symbolisen linkin esitett√§v√§√§n sis√§lt√∂√∂n.</p>
          <p>Luon projektia varten seuraavat subdomainit:</p>
          <ul>
              <li>graafeja <span class="text-accent-400">[Julkaisua varten]</span></li>
              <li>graafitBackend <span class="text-accent-400">[Laravel:in asennusta varten]</span></li>
          </ul>

          <p>cPanelin p√§√§sivun DOMAINS-v√§lilehdelt√§ l√∂ytyy <em>Subdomains-painike</em>.</p>

          <figure class="text-neutral-100 bg-primary-400">
              <img class="display-in-modal" src="./images/cPanel-DOMAINS.png" alt="cPanel Domains-v√§lilehti" />
              <figcaption>cPanel Domains-v√§lilehti.</figcaption>
          </figure>

          <p>Painike avaa Subdomains n√§kym√§n, joka sis√§lt√§√§ lomakkeen, jonka avulla alidomaineja voidaan lis√§t√§.</p>
          <!-- Trigger the Modal -->
          <figure class="text-neutral-100 bg-primary-400">
              <img class="display-in-modal" src="./images/cPanel-addSubdomain.png" alt="Luodaan graafitBackend niminen alidomain ja sijoitetaan alidomainin tiedostot graafitBackend nimiseen alihakemistoon." />
              <figcaption>Kuvan esimerkiss√§ luodaan <em class="text-neutral-100">graafitBackend</em> niminen alidomain ja sijoitetaan alidomainin tiedostot <em class="text-neutral-100">graafitBackend</em> nimiseen alihakemistoon.</figcaption>
          </figure>

          <p>Kun subdomainit on lis√§tty, n√§kyv√§t ne Subdomains-sivun alalaidan listalla. (Minulla on jo entuudestaan pari muutakin subdomainia)</p>
          <figure class="text-neutral-100 bg-primary-400">
              <img class="display-in-modal" src="./images/cPanel-twoSubdoimains-added.png" alt="cPanel Subdomain listaus"/>
              <figcaption>cPanel Subdomain listaus</figcaption>
          </figure>

          <p>Kun lis√§t√§√§n alidomain, niin t√§ss√§ yhteydess√§ sille avataan oma hakemisto.</p>

          <p>cPanelin etusivun Files-v√§lilehden kautta p√§√§see tiedostonhallintaan. K√§yd√§√§n varmistamassa, ett√§ alidomaineja vastaavat hakemistot ovat olemassa.</p>

          <figure class="text-neutral-100 bg-primary-400">
            <img 
              class="display-in-modal" 
              src="./images/cPanel-filemanager-valilehti.png" 
              alt="cPanel Filemanager-v√§lilehti"
            />
            <figcaption>cPanel Filemanager-v√§lilehti</figcaption>
          </figure>   
          
          <p>public_html hakemistoon on lis√§tty subdomaineille omat kansionsa.</p>

          <figure class="text-neutral-100 bg-primary-400">
            <img 
              class="display-in-modal" 
              src="./images/cPanel-filemanager-folders_created.png" 
              alt="Molemmille subdomaneille on lis√§tty oma hakemistonsa"
            />
            <figcaption>Molemmille subdomaneille on lis√§tty oma hakemistonsa.</figcaption>
          </figure> 

          <p>GitHub actionsin avulla tapahtuvaa p√§ivitt√§mist√§ varten tarvitaan FTP-tunnus. Luodaan se seuraavaksi. Tallennetaan samalla k√§ytt√§j√§tunnus ja salasana my√∂hemp√§√§ k√§ytt√∂√§ varten!</p>

          <p><span class="text-accent-400">Hakemistoksi asetetaan polku Laravel-asennusta varten luotuun subdomainiin!</span></p>

          <figure class="text-neutral-100 bg-primary-400">
            <img 
              class="display-in-modal" 
              src="./images/cPanel-create-ftpAccount.png" 
              alt="cPanel FTP-tunnuksen luonti"
            />
            <figcaption>cPanel FTP-tunnuksen luonti.</figcaption>
          </figure> 

          <p>Kun k√§ytt√§j√§ on luotu, ilmestyy nimi sivun alalaidassa esitett√§v√§√§n FTP-k√§ytt√§jien listaan.</p>
          
          <figure class="text-neutral-100 bg-primary-400">
            <img 
              class="display-in-modal" 
              src="./images/cPanel-addFTPUserADDED.png" 
              alt="Lis√§tty k√§ytt√§j√§ n√§kyy FTP-tunnusten listassa"
            />
            <figcaption>Lis√§tty k√§ytt√§j√§ n√§kyy FTP-tunnusten listassa.</figcaption>
          </figure> 

          <p>Kirjaa yl√∂s lis√§√§m√§si k√§ytt√§j√§tunnus ja salasana!

          [<button onclick='displayNotes("V2")' class="notes_link">Muistiinpanot</button>]

          </p>

          <p>Siirryt√§√§n alkuvalmisteluissa seuraavaksi Githubin pariin.</p>

          <a href="#top_of_the_page">Takaisin sivun alkuun</a>

        </div>
      </section>


      <section class="padding-block-200 border-bottom">
        <div class="container tutorial-text">
          
          <h3 id="alustus-github" class="fs-600 fw-bold">Github</h3>

          <p>Luodaan tyhj√§ repository. <span class="text-accent-400">Huom! T√§ss√§ vaiheessa ei lis√§t√§ README.md tiedostoa.</span></p>
          
          <figure class="text-neutral-100 bg-primary-400">
            <img 
              class="display-in-modal" 
              src="./images/github-create-new-repository.png" 
              alt="Uuden Github repositoryn luonti"
            />
            <figcaption>Uuden Github repositoryn luonti.</figcaption>
          </figure> 

          <p>Kun repository on luotu, aukeaa n√§kym√§, jossa listataan tyypillisi√§ vaihtoehtoja, joita t√§ss√§ vaiheessa tehd√§√§n. Kopioidaan talteen seuraava kohta:</p>
          
          <figure class="text-neutral-100 bg-primary-400 display-on-mobile">
            <img 
              class="display-in-modal" 
              src="./images/github-typical-options.png" 
              alt="Omalla koneella olevan git-projektin tallettaminen luotuun repositoryyn."
            />
            <figcaption>Omalla koneella olevan git-projektin tallettaminen luotuun repositoryyn.</figcaption>
          </figure> 
          
          <pre class="hide-on-mobile">
‚Ä¶or push an existing repository from the command line
git remote add origin https://github.com/RaimoHaikari/graafeja.git
git branch -M main
git push -u origin main</pre>
        

          <p>
            <span class="text-accent-400">
                Huom! Sinulla ensimm√§isell√§ rivill√§ oleva sanan origin j√§lkeen lukeva osuus vastaa tietenkin sinun luomasi repositoryn nime√§.
            </span>
          </p>

          <p>Talletetaan seuraavaksi webhotellin p√§ivitt√§misen edellytt√§m√§t FTP-tiedot. T√§m√§ tapahtuu <a href="https://docs.github.com/en/rest/actions/secrets" target="_blank">Actions secrets</a>-asetusten avulla. P√§√§semme sy√∂tt√§m√§√§n ne kun valitsemme p√§√§valikosta kohdan <em>Settings</em>, jonka j√§lkeen aukeavan sivun vasemman laidan valikosta valitaan ensin kohta <em>Secrets</em> ja t√§m√§n j√§lkeen alavalinta <em>Actions</em>.</p>

          <figure class="text-neutral-100 bg-primary-400">
            <img 
              class="display-in-modal" 
              src="./images/githubSettingsSecrets.png" 
              alt="Github actions secrets -asetusten m√§√§ritt√§minen."
            />
            <figcaption>Github actions secrets -asetusten m√§√§ritt√§minen.</figcaption>
          </figure> 
          
          <p id="github-secrets">Talletetaan kolme salaisuutta. <button onclick='displayNotes("V2")' class="notes_link">Muistiinpanot</button>.</p>

          <ul>
            <li>ftp_server <span class="text-accent-400">(Muistiinpanojen FTP -osoite)</span></li>
            <li>ftp_username <span class="text-accent-400">(Muistiinpanojen K√§ytt√§j√§)</span></li>
            <li>ftp_password <span class="text-accent-400">(Muistiinpanojen Salasana)</span></li>
          </ul>

          <p>Salaisuudet sy√∂tet√§√§n yksi kerrallaan.</p>

          <figure class="text-neutral-100 bg-primary-400">
            <img 
              class="display-in-modal" 
              src="./images/github-settings-actions-secrets-add.png" 
              alt="FTP -palvelinta koskevan salaisuuden tallentaminen."
            />
            <figcaption>FTP -palvelinta koskevan salaisuuden tallentaminen.</figcaption>
          </figure>

          <p>Kun salaisuudet on sy√∂tetty, n√§kyv√§t ne sivun alalaidan listassa:</p>

          <figure class="text-neutral-100 bg-primary-400">
            <img 
              class="display-in-modal" 
              src="./images/githubSettingsSecretsADDED.png" 
              alt="Lista talletetuista Github actions secrets -asetuksista."
            />
            <figcaption>Lista talletetuista Github actions secrets -asetuksista.</figcaption>
          </figure>

          <p class="text-accent-400">GitHub k√§ytt√§√§ salaisuuksien nimiss√§ isoja kirjaimia, mutta palvelinta p√§ivitt√§ess√§mme k√§yt√§mme tallentamisen yhteydess√§ k√§ytetty√§ muotoa.</p>

          <p><a href="#top_of_the_page">Takaisin sivun alkuun</a></p>
                
        </div>
      </section>

      <section class="padding-block-200 border-bottom">
        <div class="container tutorial-text">

          <h3 id="uusi-laravel-projekti" class="fs-600 fw-bold">Kotikone</h3>

          <p>K√§ynnistet√§√§n omalla koneella toimiva webpalvelin. Laravelin asennus ei edellyt√§, ett√§ palvelin on p√§√§ll√§, mutta pian sit√§ tarvitaan.</p>

          <p>Laravel-projektin asentaminen edellytt√§√§ Composerin k√§ytt√∂√§, joten jos Composer ei ole jo asennettuna, voit ladata sen <a href="https://getcomposer.org/" target="_blank">t√§√§lt√§</a>.</p>

          <p>Luodaan uusi Laravel projekti. <span class="text-accent-400">Nimeksi valitaan edellisess√§ vaiheessa luodun Github repositoryn nimi.</span></p>

          <pre>
composer create-project laravel/laravel graafeja
</pre>

          <p>Siirryt√§√§n luotuun hakemistoon ja tehd√§√§n siit√§ git-repository</p>

          <pre>
git init</pre>

          <p>Lis√§t√§√§n t√§ss√§ vaiheessa kaksi hakemistoa: ensiksi <em>.github</em> ja t√§m√§n hakemiston sis√§√§n: <em>workflows</em></p>

          <p>workflows hakemiston sis√§√§n luodaan <em>actions.yml</em> niminen tiedosto. T√§ss√§ tiedostossa m√§√§ritell√§√§n toimenpiteet, jotka GitHub:in halutaan suorittavan.</p>

          <p>Projektin juuresta k√§si hakemistolistauksen pit√§isi n√§ytt√§√§ suurin piirtein seuraavalta:</p>

          <figure class="text-neutral-100 bg-primary-400">
            <img 
              class="display-in-modal" 
              src="./images/myComputer-project-contents.png" 
              alt="Hakemistolistaus lis√§ttyjen hakemistojen j√§lkeen."
            />
            <figcaption>Hakemistolistaus lis√§ttyjen hakemistojen j√§lkeen.</figcaption>
          </figure>

          <p>actions.yml tiedoston sis√§ll√∂ksi kopioidaan seuraava json -koodi:</p>

          <pre class="hide-on-mobile">
on: 
  push:
    branches: main
name: üöÄ Deploy website on push
jobs:
  web-deploy:
    name: üéâ Deploy
    runs-on: ubuntu-latest
    steps:
    - name: üöö Get latest code
      uses: actions/checkout@v2
    
    - name: üìÇ Sync files
      uses: SamKirkland/FTP-Deploy-Action@4.3.1
      with:
        server: ${{ secrets.ftp_server }}
        username: ${{ secrets.ftp_username }}
        password: ${{ secrets.ftp_password }}</pre>

          <figure class="text-neutral-100 bg-primary-400 display-on-mobile">
            <img 
              class="display-in-modal" 
              src="./images/actions-script-sample.png" 
              alt="Github Actions yleisskripti."
            />
            <figcaption>Github Actions yleisskripti.</figcaption>
          </figure>

          <p>Koodi on per√§isin osoitteesta: <a href=" https://github.com/marketplace/actions/ftp-deploy" target="_blank">https://github.com/marketplace/actions/ftp-deploy</a>.</p>

          <p>Kyseisell√§ sivulla esitell√§√§n automaattista, FTP:n avulla suoritettavaa p√§ivityst√§ ja listataan tyypillisten k√§ytt√∂tilanteiden malleja.</p>

          <p>Huomiota kannattaa kiinnitt√§√§ koodinp√§tk√§n kolmeen viimeiseen riviin:</p>

          <ul>
            <li>secrets.ftp_server</li>
            <li>secrets.ftp_username</li>
            <li>secrets.ftp_password</li>
          </ul>

          <p>Ne vastaavat GitHub-repositoryn luomisen yhteydess√§ <a href="#github-secrets">tallennettuja salaisuuksia</a>.</p>

          <p>Varmistetaan, ett√§ Laravelin asennus onnistui. Eli k√§ynnist√§√§n kehityspalvelin ja todetaan selaimesta, ett√§ projektin oletussivu aukeaa selaimeen:</p>

          <pre>
php artisan serve</pre>

          <p>Jonkan j√§lkeen selaimella osoitteesta http://localhost:8000/ pit√§isi l√∂yty√§ uuden Laravel-projektin avausikkuna.</p>
          
          <figure class="text-neutral-100 bg-primary-400">
            <img 
              class="display-in-modal" 
              src="./images/localhost-laravel-running.png" 
              alt="Uuden Laravel-projektin avausn√§kym√§."
            />
            <figcaption>Uuden Laravel-projektin avausn√§kym√§.</figcaption>
          </figure>

          <p>Kaiken pit√§isi olla kotikoneella nyt kunnossa ja olemme valmiita tallettamaan tehdyt muutokset GitHub-repositoryyn.</p>

          <p>Lis√§t√§√§n tehdyt muutokset committiin:</p>

          <pre>
git add .
git commit -m 'Projektin avaus'</pre>

          <p>Yhdistet√§√§n projekti GitHub repositoryyn:</p>

          <pre>
git remote add origin https://github.com/RaimoHaikari/graafeja.git</pre>

          <p><span class="text-accent-400">Sinulla originin j√§lkeen tulevan osuuden pit√§√§ vastaa omaa repositoryasi!</span></p>

          <p>Pushataan tehdyt muutokset GitHub:iin:</p>

          <pre>
git branch -M main
git push -u origin main</pre>

          <p><a href="#top_of_the_page">Takaisin sivun alkuun</a></p>

        </div>
      </section>



      <section class="padding-block-200 border-bottom">
        <div class="container tutorial-text">

          <h3 id="github-varmistus" class="fs-600 fw-bold">Github</h3>

          <p>Ensimm√§isen p√§ivityksen j√§lkeen projektin p√§√§sivulle on ilmestynyt kopio projektin tiedostoista.</p>

          <figure class="text-neutral-100 bg-primary-400">
            <img 
              class="display-in-modal" 
              src="./images/github-repository-after-first-commit.png" 
              alt="Kotikoneella olevat tiedostot on kopioitu Github repository:iin."
            />
            <figcaption>Kotikoneella olevat tiedostot on kopioitu Github repository:iin.</figcaption>
          </figure>

          <p>Jos kaikki meni hyvin, niin tovin kuluttua Actions -v√§lilehdelle ilmestyy merkint√§ onnistuneesta ajosta. </p>


          <figure class="text-neutral-100 bg-primary-400">
            <img 
              class="display-in-modal" 
              src="./images/github-actions-after-first-commit.png" 
              alt="Kotikoneella olevat tiedostot on kopioitu Github-repository:iin."
            />
            <figcaption>Kotikoneella olevat tiedostot on kopioitu Github repository:iin.</figcaption>
          </figure>

          <p>Vilkaistaan seuraavaksi milt√§ cPanelin puolella n√§ytt√§√§.</p>

          <p><a href="#top_of_the_page">Takaisin sivun alkuun</a></p>

        </div>
      </section>


      <section class="padding-block-200 border-bottom">
        <div class="container tutorial-text">

          <h3 id="laravel-asennus-palvelimella" class="fs-600 fw-bold">cPanel</h3>

          <p>Jos vilkaisemme cPanelin tiedostolistausta, niin Laravel-tiedostoille varattuun hakemistoon on ilmestynyt koko joukko tiedostoja.</p>

          <figure class="text-neutral-100 bg-primary-400">
            <img 
              class="display-in-modal" 
              src="./images/cPanel-after-first-push.png" 
              alt="Kotikoneella olevat tiedostot on kopioitu Webhotelliin."
            />
            <figcaption>Kotikoneella olevat tiedostot on kopioitu Webhotelliin</figcaption>
          </figure>

          <p>T√§m√§ ei tarkoita viel√§ sit√§, ett√§ Laravel-projekti olisi nyt n√§ht√§viss√§. Vaikka tiedostot ovat jo paikalla, t√§ytyy projekti erikseen asentaa viel√§ Webpalvelimella.</p>
            
          <p>Se puolestaan edellytt√§√§ komentokehotteella tapahtuvaa ty√∂skentely√§.</p>
          
          <p>Minulla cPanel:sta l√∂ytyy terminal ja aion k√§ytt√§√§ sit√§ seuraavissa toimenpiteiss√§. Jos cPanel-versio ei sis√§ll√§ terminaalia, niin samat teht√§v√§t voi hoitaa esim. <a href="https://www.putty.org/" target="_blank">Putty:n</a> avulla.</p>
            
          <figure class="text-neutral-100 bg-primary-400">
            <img 
              class="display-in-modal" 
              src="./images/cPanel-advanced-valilehti.png" 
              alt="Terminaalin k√§ynnistys cPanelissa."
            />
            <figcaption>Terminaalin k√§ynnistys cPanelissa.</figcaption>
          </figure>
          
          <p>Luodaan saman tien symbolinen linkki, jonka kautta Laravel-projekti on tarkoitus tarjota suuren yleis√∂n n√§ht√§ville.</p>
          
          <p>Oppaan tapauksessa siirryt√§√§n graafeja-hakemistoon ja ajetaan seuraava k√§skyt:</p>
          
          <pre>
cd public_html
cd graafeja
cp --symbolic-link ../graafitBackend/public/* .
cp --symbolic-link ../graafitBackend/public/.htaccess .</pre>

          <p>Kun hakemistossa t√§m√§n j√§lkeen tulostaa laajennetun tiedostolistauksen, pit√§isi sen n√§ytt√§√§ suunnilleen seuraavalta:</p>

          <figure class="text-neutral-100 bg-primary-400">
            <img 
              class="display-in-modal" 
              src="./images/cPanel-terminal-after-symlink.png" 
              alt="Julkisen hakemiston tiedostolistaus."
            />
            <figcaption>Julkisen hakemiston tiedostolistaus.</figcaption>
          </figure>

          <p><span class="text-accent-400">Erinomaisen t√§rke√§√§ on, ett√§ .htaccess -tiedosto n√§kyy listalla!</span></p>
          
          <p>Siirryt√§√§n seuraavaksi projektikansioon ja ajetaan Composerin asennuskomento.</p>

          <pre>
cd ..
cd graafitBackend
composer install</pre>
          
          <p>Kun asennus on valmis, pit√§√§ luoda <em>.env -tiedosto</em>. K√§ytet√§√§n apuna asennuksen mukana tulevaa <em>.env.example -tiedostoa</em>:</p>

          <pre>
cp .env.example .env</pre>
          
          <p>Luodaan "key":</p>

          <pre>
php artisan key:generate</pre>

          <p>Jos kaikki on sujunut t√§h√§n asti mallikkaasti, niin Laravel-projekti on nyt n√§ht√§viss√§ julkiseksi tarkoitetun subdomainin kautta.</p>
          
          <p>Oppaan tapauksessa projekti on l√∂ytyy, kun selaimella menee osoitteeseen: <a target="_blank" href="http://graafeja.tahtisadetta.fi/">http://graafeja.tahtisadetta.fi</a></p>
          
          <figure class="text-neutral-100 bg-primary-400">
            <img 
              class="display-in-modal" 
              src="./images/webhotel-laravel-running.png" 
              alt="Uuden Laravel-projektin avausn√§kym√§ webpalvelimella."
            />
            <figcaption>Uuden Laravel-projektin avausn√§kym√§ webpalvelimella.</figcaption>
          </figure>

          <p><a href="#top_of_the_page">Takaisin sivun alkuun</a></p>
                
        </div>
      </section>



      <section class="padding-block-200 border-bottom">
        <div class="container tutorial-text">

          <h3 id="tietokanta-palvelimella" class="fs-600 fw-bold">Tietokanta</h3>

          <p>On viel√§ yksi t√§rke√§ teht√§v√§ j√§ljell√§, tietokantaan yhdist√§minen. Suoritetaan aluksi Webhotellin p√§√§ss√§ tarvittavat alkuvalmistelut.</p>

          <p>cPanelin Databases-v√§lilehdelt√§ p√§√§see luomaan tietokantoja.</p>

          <figure class="text-neutral-100 bg-primary-400">
            <img 
              class="display-in-modal" 
              src="./images/cPanel-databases-folder.png" 
              alt="cPanelin tietokanta-asetukset."
            />
            <figcaption>cPanelin tietokanta-asetukset</figcaption>
          </figure>

          <p>Luodaan projektia varten uusi tietokanta.</p>

          <figure class="text-neutral-100 bg-primary-400">
            <img 
              class="display-in-modal" 
              src="./images/cPanel-add-new-Database.png" 
              alt="Uuden tietokannan lis√§√§minen cPanelissa."
            />
            <figcaption>Uuden tietokannan lis√§√§minen cPanelissa.</figcaption>
          </figure>

          <p>Luomisen j√§lkeen tietokanta ilmestyy sivun alalaidassa esitett√§v√§√§n listaan. (Minulla oli entuudestaan jo pari tietokantaa.)</p>

          <figure class="text-neutral-100 bg-primary-400">
            <img 
              class="display-in-modal" 
              src="./images/cPanel-new-database-added.png" 
              alt="Uusi tietokanta on lis√§tty."
            />
            <figcaption>Uusi tietokanta on lis√§tty.</figcaption>
          </figure>

          <p>Luodaan kantaa varten my√∂s uusi k√§ytt√§j√§.</p>

          <figure class="text-neutral-100 bg-primary-400">
            <img 
              class="display-in-modal" 
              src="./images/cPanel-add_new-db_user.png" 
              alt="Uuden tietokantak√§ytt√§j√§n lis√§√§minen cPanel:ssa."
            />
            <figcaption>Uuden tietokantak√§ytt√§j√§n lis√§√§minen cPanel:ssa.</figcaption>
          </figure>

          <p>Kytket√§√§n lis√§tty k√§ytt√§j√§ projektin tietokantaan.</p>

          <figure class="text-neutral-100 bg-primary-400">
            <img 
              class="display-in-modal" 
              src="./images/cPanel-map_DB-and-USER.png" 
              alt="Uuden tietokantak√§ytt√§j√§n lis√§√§minen cPanel:ssa."
            />
            <figcaption>Luodun k√§ytt√§j√§n yhdist√§minen tietokantaan.</figcaption>
          </figure>

          <p>Aukeavassa n√§kym√§ss√§ annetaan k√§ytt√§j√§lle t√§ydet oikeudet tietokantaan.</p>

          <figure class="text-neutral-100 bg-primary-400">
            <img 
              class="display-in-modal" 
              src="./images/cPanel-db-user-priviledges.png" 
              alt="Annetaan k√§ytt√§j√§lle t√§ydet oikeudet valittuun tietokantaan."
            />
            <figcaption>Annetaan k√§ytt√§j√§lle t√§ydet oikeudet valittuun tietokantaan.</figcaption>
          </figure>

          <p>Kirjaa yl√∂s juuri m√§√§ritt√§m√§si tiedot. <button onclick='displayNotes("V3")' class="notes_link">Muistiinpanot</button></p>

          <p>Seuraavaksi tietokantayhteytt√§ koskevat tiedot on tallennettava .env -tiedostoon.</p>

          <p>Min√§ k√§yt√§n cPanelin tiedostonhallinnan edit-toimintoa. Teht√§v√§ voidaan hoitaa my√∂s esim. <a href="https://en.wikipedia.org/wiki/Vi" target="_blank">vi-editorilla</a>. </p>

          <p>Etsit√§√§n tiedostosta tietokantayhteytt√§ koskeva kohta ja talletetaan luotua tietokantaa ja k√§ytt√§j√§√§ koskevat tiedot.<button onclick='displayNotes("V3")' class="notes_link">Muistiinpanot</button></p>
          
          <figure class="text-neutral-100 bg-primary-400">
            <img 
              class="display-in-modal" 
              src="./images/cPanel-update_env-file.png" 
              alt="Tietokanta-asetusten m√§√§ritt√§minen .env -tiedostossa."
            />
            <figcaption>Tietokanta-asetusten m√§√§ritt√§minen .env -tiedostossa.</figcaption>
          </figure>

          <p>cPanelin Databases v√§lilehdelt√§ voi avata phpMyAdmin -ikkunan. Lis√§tty tietokanta n√§kyy ikkunassa (toistaiseksi) tyhj√§n√§ tietokantana.</p>

          <figure class="text-neutral-100 bg-primary-400">
            <img 
              class="display-in-modal" 
              src="./images/cPanel-phpAdmin-db-added.png" 
              alt="Luotu tietokanta n√§htyn√§ phpMyAdmin sovelluksen kautta."
            />
            <figcaption>Luotu tietokanta n√§htyn√§ phpMyAdmin sovelluksen kautta.</figcaption>
          </figure>
          
          <p><a href="#top_of_the_page">Takaisin sivun alkuun</a></p>
                
        </div>
      </section>

      <section class="padding-block-200 border-bottom">
        <div class="container tutorial-text">
                
          <h3 id="tietokanta-asetukset-omalla-koneella" class="fs-600 fw-bold">Tietokanta omalla koneella</h3>

          <p>Palataan omalle koneelle ja luodaan my√∂s sinne tietokanta. Vaiheet ovat samanlaiset kuin juuri √§sken tehtiin palvelimella. Kotikoneella ei todenn√§k√∂isesti ole cPanelia, mutta jos k√§yt√∂ss√§ on Xampp, niin avaamalla selaimeen uusi v√§lilehti ja kirjoittamalla osoitteeksi:</p>

          <pre>
http://localhost/dashboard/</pre>

          <p>Aukeaa Xampp:in porttaalisivu, jonka oikeassa yl√§laidassa on linkki <em>phpMyAdmin</em>.</p>

          <figure class="text-neutral-100 bg-primary-400">
            <img 
              class="display-in-modal" 
              src="./images/localhost-xampp-portal.png" 
              alt="Xampp:n porttaalisivu."
            />
            <figcaption>Xampp:n porttaalisivu.</figcaption>
          </figure>

          <p>Linkin takaa aukeaa tuttu SQL-hallintapaneeli.</p>

          <figure class="text-neutral-100 bg-primary-400">
            <img 
              class="display-in-modal" 
              src="./images/localhost-phpMyAdmin.png" 
              alt="SQL-hallintapaneeli."
            />
            <figcaption>SQL-hallintapaneeli.</figcaption>
          </figure>

          <p>Tietokanta saadaan luotua esim. klikkaamalla SQL-v√§lilehte√§. Ja sy√∂tt√§m√§ll√§ SQL-komennoille varattuun tilaan:</p>

          <pre>
CREATE DATABASE tahti885_db_graafeja;</pre>

          <p>ja painamalla GO-painiketta.</p>

          <figure class="text-neutral-100 bg-primary-400">
            <img 
              class="display-in-modal" 
              src="./images/localhost-phpAdmin-sql.png" 
              alt="Uuden tietokannan luominen phpMyAdminin SQL-hallintapaneelissa."
            />
            <figcaption>Uuden tietokannan luominen phpMyAdminin SQL SQL-hallintapaneelissa.</figcaption>
          </figure>

          <p>T√§ll√§ kertaa luon omalle koneelle samanlaisilla asetuksilla tietokannan k√§ytt√§jineen kuin edellisess√§ vaiheessa tein palvelimelle.</p>
          
          <p>Mutta sin√§ns√§ omalla koneella ja palvelimella olevien tietokanta-asetusten ei tarvitse olla identtisi√§, sill√§ Laravel-instanssin k√§ytt√§m√§n .env -tiedoston sis√§lt√∂ ratkaisee kulloinkin voimassa olevat tietokanta-asetukset. </p>
          
          <p>Sen j√§lkeen kun my√∂s kotikoneen <em>.env -tiedostoa</em> on muokattu, kannattaa Laravel-prosessi k√§ynnist√§√§ uudelleen.</p>

          <p>Eli painetaan <em>CTRL + c</em></p>

          <p>Jonka j√§lkeen ajetaan komento:</p>

          <pre>
php artisan serve</pre>

          <p>Laravel asennuksen mukana tulee harjoittelua varten valmius luoda yksinkertainen k√§ytt√§j√§tietokanta. Se saadaan k√§ytt√∂√∂ kirjoittamalla seuraava komento:</p>

          <pre>
php artisan migrate</pre>

          <p>Kun teht√§v√§ on suoritettu ja phpMyAdmin-ikkunassa valitaan juuri √§sken luotu tietokanta, niin sen sis√§lle on ilmestynyt joukko tietokantatauluja:</p>

          <figure class="text-neutral-100 bg-primary-400">
            <img 
              class="display-in-modal" 
              src="./images/localhost-phpAdmin-users-created.png" 
              alt="Laravel tietokantaan on ilmestynyt tauluja."
            />
            <figcaption>Laravel tietokantaan on ilmestynyt tauluja.</figcaption>
          </figure>

          <p>Luodaan yksi k√§ytt√§j√§. Se voidaan tehd√§ esim. seuraavilla komennoilla:</p>

          <pre>
php artisan tinker</pre>

          <p>T√§m√§ avaa Psy Shell:in. Sy√∂tet√§√§n siihen seuraava koodinp√§tk√§:</p>

          <pre>
User::factory()->create()</pre>

          <figure class="text-neutral-100 bg-primary-400">
            <img 
              class="display-in-modal" 
              src="./images/vscode-psyShell.png" 
              alt="Testik√§ytt√§j√§n lis√§√§minen Psy Shelliss√§."
            />
            <figcaption>Testik√§ytt√§j√§n lis√§√§minen Psy Shelliss√§.</figcaption>
          </figure>

          <p>Psy Shellin saa suljettua kirjoittamalla komentokehotteeseen exit.</p>

          <p>Jos nyt avaa phpMyAdminissa users-taulun, niin siell√§ pit√§isi olla yksi k√§ytt√§j√§!</p>


          <figure class="text-neutral-100 bg-primary-400">
            <img 
              class="display-in-modal" 
              src="./images/localhost-phpMyAdmin-one-user-added-upd.png" 
              alt="Lis√§tty k√§ytt√§j√§ n√§kyy phpMyAdmin-ikkunassa."
            />
            <figcaption>Lis√§tty k√§ytt√§j√§ n√§kyy phpMyAdmin-ikkunassa.</figcaption>
          </figure>

          <p>Muokataan hieman Laravel:in web.php-tiedostoa. Se l√∂ytyy kansiosta: routes.</p>

          <p>Lis√§t√§√§n uusi route, joka tulostaa tietokantaan talletettujen k√§ytt√§jien m√§√§r√§n:</p>

          <pre>
Route::get('/users', function () {

    $users = App\Models\User::all();
    return "&lt;p&gt;K√§ytt√§ji√§ on yhteens√§: ".count($users)." kpl&lt;/p&gt;";

});</pre>

          <p>Tiedoston pit√§isi siis n√§ytt√§√§ seuraavalta:</p>

          <figure class="text-neutral-100 bg-primary-400">
            <img 
              class="display-in-modal" 
              src="./images/vscode-routes-routeAdded.png" 
              alt="Muokattu web.php-tiedosto."
            />
            <figcaption>Muokattu web.php-tiedosto.</figcaption>
          </figure>

          <p>Kun selaimella menn√§√§n osoitteeseen: http://localhost:8000/users, niin aukeava sivu kertoo, ett√§ tietokannassa on yksi k√§ytt√§j√§.</p>

          <figure class="text-neutral-100 bg-primary-400">
            <img 
              class="display-in-modal" 
              src="./images/localhost-route-users.png" 
              alt="Muokattu web.php-tiedosto."
            />
            <figcaption>Muokattu web.php-tiedosto.</figcaption>
          </figure>

          <p>Kotikoneella tietokantayhteys on nyt saatu toimimaan.</p>

          <p>Talletetaan p√§ivitykset Github-repositoryyn. Kun k√§yt√∂ss√§ on Github-actions, niin samalla p√§ivittyy my√∂s Webhotellin puolella ajettava Laravel-instanssi.</p>

          <p>Komento sanan toistuva k√§ytt√∂ alkaa √§rsytt√§m√§√§n, vaihdetaan l√§hestymistapaa ja esitet√§√§n versionhallinnalle seuraavat toivomukset:</p>

          <pre>
git add .
git commit -m "Tietokanta otettu k√§ytt√∂√∂n"
git push</pre>

          <p><a href="#top_of_the_page">Takaisin sivun alkuun</a></p>

        </div>
      </section>


      <section class="padding-block-200 border-bottom">
        <div class="container tutorial-text">

          <h3 id="tietokanta-asetusten-viimeistely-palvelimella" class="fs-600 fw-bold">Loppuhuipentuma</h3>

          <p>Jos nyt vilkaistaan milt√§ Github-repositoryn Actions v√§lilehdell√§ n√§ytt√§√§, niin kohtaan All workflows on ilmestynyt uusi merkint√§.</p>

          <figure class="text-neutral-100 bg-primary-400">
            <img 
              class="display-in-modal" 
              src="./images/github-actions-databaseAdded.png" 
              alt="Github actions -listalle on ilmestynyt uusi merkint√§."
            />
            <figcaption>Github actions -listalle on ilmestynyt uusi merkint√§.</figcaption>
          </figure>

          <p>Nyt ollaan jo melkein maalissa.</p>

          <p>Jotta tietokanta tulisi alustetuksi my√∂s Webhotellin puolella, pit√§√§ terminaalissa ajaa samat komennot, kuin omalla koneella suoritettiin tietokantaa alustettaessa, eli:</p>
          
          <pre>
php artisan migrate</pre>
          
          <p>...mutta luodaankin palvelimelle 10 k√§ytt√§j√§√§:</p>

          <pre>
php artisan tinker</pre>

          <p>Ja Psy -editorissa:</p>

          <pre>
User::factory()->count(10)->create()
Exit</pre>

          <p>Kun t√§m√§n j√§lkeen avaamme k√§ytt√§jien m√§√§r√§n ilmoittavan sivun, niin n√§emme viestin, joka kertoo tietokantaan lis√§ttyjen k√§ytt√§jien m√§√§r√§n.</p>
        
          <figure class="text-neutral-100 bg-primary-400">
            <img 
              class="display-in-modal" 
              src="./images/webhotel-laravel-dbInUse.png" 
              alt="Webpalvelimella toimiva k√§ytt√§jien m√§√§r√§n ilmoittava sivu."
            />
            <figcaption>Webpalvelimella toimiva k√§ytt√§jien m√§√§r√§n ilmoittava sivu.</figcaption>
          </figure>

          <p><a href="#top_of_the_page">Takaisin sivun alkuun</a></p>

            <!-- T E X T  M O D A L -->
          <div id="lgc-textModal" class="textModal">

            <!-- Modal content -->
            <div class="textModal-content text-neutral-100">
              <span class="textModal-close">&times;</span>
              <p class="fw-bold">FTP -address:<span class="margin-left fw-regular with-letter-spacing" id="ftp-address-value"></span></p>
              <p class="fw-bold">FTP -username:<span class="margin-left fw-regular with-letter-spacing" id="ftp-username-value"></span></p>
              <p class="fw-bold">FTP -password:<span class="margin-left fw-regular with-letter-spacing" id="ftp-password-value"></span></p>

              <p class="fw-bold">DB_DATABASE:<span class="margin-left fw-regular with-letter-spacing" id="db-database-value"></span></p>
              <p class="fw-bold">DB_USERNAME:<span class="margin-left fw-regular with-letter-spacing" id="db-user-value"></span></p>
              <p class="fw-bold">DB_PASSWORD:<span class="margin-left fw-regular with-letter-spacing" id="db-password-value"></span></p>
            </div>

          </div>
                
        </div>
      </section>


      <section class="padding-block-200 border-bottom">
        <div class="container tutorial-text">

          <h3 id="loppusanat" class="fs-600 fw-bold">Loppusanat</h3>

          <p>
              Vaikka t√§m√§ opas p√§√§stiin nyt loppuun, niin matka on vasta alussa. 
              Seuraavaksi voi tutustua vaikka Actions skriptien tarjoamiin mahdollisuuksiin.
              Skripti√§ hiomalla on mahdollista v√§hent√§√§ tarvittavaa terminaali ty√∂skentely√§. 
              Vinkkej√§ l√∂ytyy esimerkiksi <a href="https://stackoverflow.com/questions/70996923/is-that-possible-to-deploy-laravel-web-application-to-shared-hosting-using-githu" target="_blank">t√§√§lt√§</a>.
          </p>

          <p><a href="#top_of_the_page">Takaisin sivun alkuun</a></p>

        </div>
      </section>

    </main>


    <footer class="primary-footer padding-block-700 bg-neutral-900 text-neutral-100">
      <div class="container">
        <div class="even-columns">

          <div  class="primary-footer-logos">

            <a href="#" aria-label="home">
              <svg class="logo">
                <use xlink:href="./images/sitelogo-sprite.svg#sitelogo"></use>
              </svg>
            </a>

            <ul class="social-list" role="list" aria-label="social links">
              <li>
                <a aria-label="instagram" href="https://www.instagram.com/raimohaikari/" target="_blank">
                  <svg class="social-icon">
                    <use xlink:href="./images/social-media-ig-git.svg#icon-instagram-use"></use>
                  </svg>
                </a>
              </li>
              <li>
                <a aria-label="github" href="https://github.com/RaimoHaikari" target="_blank">
                  <svg class="social-icon">
                    <use xlink:href="./images/social-media-ig-git.svg#icon-github"></use>
                  </svg>
                </a>
              </li>
            </ul>

          </div>

          <div class="copy-right-container">
            <p>Copyright 2022. All Rights Reserved</p>
          </div>


        </div>
      </div>
    </footer>

	  <!-- <script src="./main.js"></script> -->
    <script src="./modal.js"></script>
    <script src="./textModal.js"></script>
  </body>
</html>


